{% extends 'base.html.twig' %}

{% block title %}Touch Grass{% endblock %}


  {% block stylesheets %}
      <link rel="stylesheet" href="{{ asset('Css/table.css') }}">
  {% endblock %}

{% block body %}
    <div id="info">
        <h2>Date du Jour : {{ "now" | date("m/d/Y") }}</h2>
        <h2>
            {% if app.user %}
                Participant : {{ app.user.pseudo }}
            {% else %}
                Pensez à vous connecter pour participer
            {% endif %}
        </h2>
    </div>
    <div id="filtre">
        <p>Filtrer les Sorties</p>
        <div style="display: flex;justify-content: space-around;">
            <div>
                {{ form(filtreForm) }}
            </div>
            <div>
                <div><input type="checkbox" id="chkOrag" name="chkOrag">
                    <label for="chkOrag">Sortie dont je suis l'organisateur/trice</label></div>
                <div><input type="checkbox" id="chkInscrit" name="chkInscrit">
                    <label for="chkInscrit">Sortie auxquelles je suis inscrit/e</label></div>
                <div><input type="checkbox" id="chkNoInscrit" name="chkNoInscrit">
                    <label for="chkNoInscrit">Sortie auxquelles je ne suis pas inscrit/e</label></div>
                <div><input type="checkbox" id="chkPasse" name="chkPasse">
                    <label for="chkPasse">Sortie passée</label></div>


            </div>
        </div>
    </div>
    <div id="dvg">
        <table>
            <thead>
            <tr>
                <th>Nom de la Sortie</th>
                <th>Date de la Sortie</th>
                <th>Clôture</th>
                <th>Inscrit/Places</th>
                <th>Etat</th>
                {% if app.user %}
                    <th>Inscrit</th>
                {% endif %}
                <th>Organisateur</th>
                <th>Actions</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                {% for sortie in lesSorties %}
                    <td>{{ sortie.Nom }}</td>
                    <td>{{ sortie.Datedebut | date("m/d/Y") }}</td>
                    <td>{{ sortie.Datecloture | date("m/d/Y") }}</td>
                    <td>{{ sortie.IdInscription.ParticipantsNoParticipant|length }}/{{ sortie.Nbinscriptionsmax }}</td>
                    <td>{{ sortie.EtatsNoEtat.Libelle }}</td>
                    <td>
                        {% if app.user %}
                            X
                        {% endif %}
                    </td>
                    <td>{{ sortie.Organisateur.Pseudo }}</td>
                    <td>
                        {% if app.user == sortie.Organisateur %}
                            {% if sortie.EtatsNoEtat.Id == 1 %}
                                Modifier - Publier
                            {% else %}
                                Afficher - Annuler
                            {% endif %}
                        {% elseif sortie.IdInscription.ParticipantsNoParticipant|length != sortie.Nbinscriptionsmax %}
                            Afficher
                            {% for participant in sortie.IdInscription.ParticipantsNoParticipant %}
                                {% if app.user==participant %}
                                    Se désister
                                {% endif %}
                            {% else %}
                                S'inscrire
                            {% endfor %}
                        {% elseif %}
                            Afficher
                        {% endif %}
                    </td>

                {% endfor %}
            </tr>
            </tbody>
        </table>
    </div>
    <button><a href="#">Créer une sortie</a></button>
{% endblock %}
